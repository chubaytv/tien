<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L∆∞u B√∫t C·ªßa Ti√™n üíñ</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(135deg, #ffe6e6, #c4f1e5);
      color: #333;
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Header */
    header {
      text-align: center;
      padding: 40px 20px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      animation: fadeIn 1s ease-in;
    }

    h1 {
      font-family: 'Dancing Script', cursive;
      font-size: 56px;
      color: #ff6f91;
      text-shadow: 2px 2px 4px rgba(255, 111, 145, 0.3);
    }

    header p {
      font-size: 20px;
      color: #555;
      margin: 15px 0 25px;
    }

    header button {
      background: linear-gradient(45deg, #ff9cbb, #ff6f91);
      border: none;
      padding: 12px 30px;
      border-radius: 25px;
      color: white;
      font-size: 18px;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    header button:hover {
      transform: scale(1.1);
      box-shadow: 0 5px 15px rgba(255, 111, 145, 0.4);
    }

    header button::after {
      content: '‚ú®';
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
    }

    /* Form */
    #form-section {
      max-width: 600px;
      margin: 40px auto;
      background: rgba(255, 248, 183, 0.9);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      animation: slideUp 1s ease-out;
    }

    h2 {
      font-family: 'Dancing Script', cursive;
      font-size: 40px;
      color: #ff6f91;
      text-align: center;
      margin-bottom: 25px;
      text-shadow: 1px 1px 3px rgba(255, 111, 145, 0.2);
    }

    label {
      display: block;
      font-size: 18px;
      color: #555;
      margin-bottom: 8px;
      font-weight: 600;
    }

    input, textarea {
      width: 100%;
      padding: 12px 15px;
      margin-bottom: 20px;
      border: none;
      border-radius: 15px;
      font-size: 16px;
      background: linear-gradient(135deg, #ffffff, #f9f9f9);
      box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
      transition: box-shadow 0.3s ease, transform 0.3s ease;
    }

    input:focus, textarea:focus {
      outline: none;
      box-shadow: inset 0 2px 8px rgba(255, 111, 145, 0.3), 0 0 5px rgba(255, 111, 145, 0.2);
      transform: scale(1.02);
    }

    textarea {
      height: 150px;
      resize: none;
    }

    button[type="submit"], #view-memories-btn {
      background: linear-gradient(45deg, #ff9cbb, #ff6f91);
      border: none;
      padding: 14px 35px;
      border-radius: 25px;
      color: white;
      font-size: 18px;
      cursor: pointer;
      display: block;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    button[type="submit"]:hover, #view-memories-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 5px 15px rgba(255, 111, 145, 0.4);
    }

    button[type="submit"]::after {
      content: 'üå∏';
      position: absolute;
      top: 50%;
      right: 15px;
      transform: translateY(-50%);
    }

    #view-memories-btn::after {
      content: 'üîí';
      position: absolute;
      top: 50%;
      right: 15px;
      transform: translateY(-50%);
    }

    /* Danh s√°ch l∆∞u b√∫t */
    #memories {
      max-width: 800px;
      margin: 40px auto;
      display: none; /* ·∫®n m·∫∑c ƒë·ªãnh, ch·ªâ hi·ªÉn th·ªã khi nh·∫≠p ƒë√∫ng m·∫≠t kh·∫©u */
    }

    .memory-card {
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      border-left: 5px solid #ff9cbb;
      animation: fadeInUp 1s ease-out;
    }

    .memory-card h3 {
      font-family: 'Dancing Script', cursive;
      font-size: 28px;
      color: #ff6f91;
    }

    .memory-card p {
      font-size: 16px;
      color: #333;
      margin: 10px 0;
    }

    .memory-card img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      margin-top: 10px;
    }

    .memory-card .timestamp {
      font-size: 12px;
      color: #777;
      margin-top: 10px;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes fadeInUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* Responsive */
    @media (max-width: 600px) {
      h1 {
        font-size: 40px;
      }

      h2 {
        font-size: 32px;
      }

      #form-section {
        padding: 20px;
      }

      input, textarea, button {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>L∆∞u B√∫t C·ªßa Ti√™n üíñ</h1>
    <p>H√£y ƒë·ªÉ l·∫°i k·ª∑ ni·ªám ƒë√°ng nh·ªõ cho t·ªõ nh√©! üå∏‚ú®</p>
    <button onclick="document.getElementById('form-section').scrollIntoView({ behavior: 'smooth' })">Vi·∫øt L∆∞u B√∫t Ngay</button>
  </header>

  <section id="form-section">
    <h2>Vi·∫øt L·ªùi Nh·∫Øn üíå</h2>
    <form id="memory-form">
      <label for="name">T√™n c·ªßa b·∫°n:</label>
      <input type="text" id="name" placeholder="Nh·∫≠p t√™n th·∫≠t cute=))..." required>
      <label for="message">L·ªùi nh·∫Øn y√™u th∆∞∆°ng:</label>
      <textarea id="message" placeholder="Chia s·∫ª c·∫£m x√∫c c·ªßa b·∫°n n√†o... üíï" required></textarea>
      <label for="image">H√¨nh ·∫£nh k·ª∑ ni·ªám (t√πy ch·ªçn):</label>
      <input type="file" id="image" accept="image/*">
      <button type="submit">G·ª≠i L∆∞u B√∫t Ngay üå∏</button>
    </form>
  </section>

  <section id="view-memories-section">
    <button id="view-memories-btn" onclick="promptPassword()">Xem L∆∞u B√∫t C·ªßa B·∫°n üîí</button>
  </section>

  <section id="memories">
    <h2>Nh·ªØng L·ªùi Nh·∫Øn ƒê·∫ßy T√¨nh Y√™u üíï</h2>
    <div id="memories-list"></div>
  </section>

  <!-- T√≠ch h·ª£p Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js"></script>

  <script>
    // C·∫•u h√¨nh Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAAMg65abkxh1A0x61mr",
      authDomain: "luubut-359f3.firebaseapp.com",
      projectId: "luubut-359f3",
      storageBucket: "luubut-359f3.appspot.com",
      messagingSenderId: "799802585282",
      appId: "1:799802585282:web:b4289",
      measurementId: "G-5S1M2NMMX"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const storage = firebase.storage();

    // M·∫≠t kh·∫©u ƒë·ªÉ xem l∆∞u b√∫t (ch·ªâ b·∫°n bi·∫øt)
    const correctPassword = "123chubay"; // Thay b·∫±ng m·∫≠t kh·∫©u c·ªßa b·∫°n

    // G·ª≠i l∆∞u b√∫t
    document.getElementById('memory-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const message = document.getElementById('message').value;
      const imageFile = document.getElementById('image').files[0];

      const memoryData = {
        name: name,
        message: message,
        timestamp: new Date(),
        imageUrl: ''
      };

      // N·∫øu c√≥ h√¨nh ·∫£nh, upload l√™n Firebase Storage
      if (imageFile) {
        const storageRef = storage.ref(`images/${Date.now()}_${imageFile.name}`);
        storageRef.put(imageFile).then(snapshot => {
          snapshot.ref.getDownloadURL().then(url => {
            memoryData.imageUrl = url;
            saveMemory(memoryData);
          }).catch(error => {
            console.error('L·ªói khi l·∫•y URL ·∫£nh: ', error);
            alert('C√≥ l·ªói khi upload ·∫£nh, nh∆∞ng l∆∞u b√∫t v·∫´n ƒë∆∞·ª£c g·ª≠i!');
            saveMemory(memoryData); // L∆∞u m√† kh√¥ng c√≥ ·∫£nh
          });
        }).catch(error => {
          console.error('L·ªói khi upload ·∫£nh: ', error);
          alert('C√≥ l·ªói khi upload ·∫£nh, nh∆∞ng l∆∞u b√∫t v·∫´n ƒë∆∞·ª£c g·ª≠i!');
          saveMemory(memoryData); // L∆∞u m√† kh√¥ng c√≥ ·∫£nh
        });
      } else {
        saveMemory(memoryData);
      }
    });

    // L∆∞u d·ªØ li·ªáu v√†o Firestore
    function saveMemory(memoryData) {
      db.collection('memories').add(memoryData).then(() => {
        alert('L∆∞u b√∫t ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng! üíï Nh·∫•n "Xem L∆∞u B√∫t C·ªßa B·∫°n" ƒë·ªÉ xem nh√©!');
        document.getElementById('memory-form').reset();
      }).catch(error => {
        console.error('L·ªói khi g·ª≠i l∆∞u b√∫t: ', error);
        alert('C√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i!');
      });
    }

    // Y√™u c·∫ßu m·∫≠t kh·∫©u ƒë·ªÉ xem l∆∞u b√∫t
    function promptPassword() {
      const password = prompt('Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ xem l∆∞u b√∫t:');
      if (password === correctPassword) {
        document.getElementById('memories').style.display = 'block';
        document.getElementById('view-memories-section').style.display = 'none';
        loadMemories();
      } else {
        alert('M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng! Vui l√≤ng th·ª≠ l·∫°i.');
      }
    }

    // Hi·ªÉn th·ªã danh s√°ch l∆∞u b√∫t
    function loadMemories() {
      const memoryDiv = document.getElementById('memories-list');
      memoryDiv.innerHTML = '';

      db.collection('memories')
        .orderBy('timestamp', 'desc')
        .get()
        .then(querySnapshot => {
          querySnapshot.forEach(doc => {
            const data = doc.data();
            const memoryCard = document.createElement('div');
            memoryCard.className = 'memory-card';
            memoryCard.innerHTML = `
              <h3>${data.name}</h3>
              <p>${data.message}</p>
              ${data.imageUrl ? `<img src="${data.imageUrl}" alt="H√¨nh ·∫£nh k·ª∑ ni·ªám">` : ''}
              <div class="timestamp">${new Date(data.timestamp.toDate()).toLocaleString('vi-VN')}</div>
            `;
            memoryDiv.appendChild(memoryCard);
          });
        }).catch(error => {
          console.error('L·ªói khi t·∫£i l∆∞u b√∫t: ', error);
          alert('C√≥ l·ªói x·∫£y ra khi t·∫£i d·ªØ li·ªáu!');
        });
    }
  </script>
</body><script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAAm65abxhiAOx6lmrwgVfiaDZyi37mEM8",
    authDomain: "luubut-359f3.firebaseapp.com",
    projectId: "luubut-359f3",
    storageBucket: "luubut-359f3.firebasestorage.app",
    messagingSenderId: "798802585282",
    appId: "1:798802585282:web:47698d9ca9ac111ceffd5b",
    measurementId: "G-BC4XL3B1YR"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
